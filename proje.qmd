---
title: "Temiz Ankara: İlçelere Göre Hava Kalitesi Analizi"
number-sections: true
---

**Proje sayfamıza hoş geldiniz.**

![](/assets/images/image_2025.png){fig-align="left" width="360"}

*Projemizle ilgili güncellemelerden haberdar olmak için bu alanı takip edin.*

Proje tanıtım filmine buradan ulaşabilirsiniz.

[![](/assets/video-logo.jpg){fig-align="left" width="65" height="65"}](https://www.youtube.com)

# Proje Genel Bakış ve Kapsamı

Hava kirliliği şu anda Türkiye'deki en önemli sorunlardan biri olarak kabul ediliyor ve her yıl tahmini 30 bin kişi ilgili nedenlerle ölüyor ve ülke çapındaki tüm ölümlerin yaklaşık yüzde 8'ini temsil ediyor.

Ankara'da ve aslında Türkiye'nin birçok şehrinde kirliliğin ana nedeni, 1990 yılı itibariyle ülkede yaklaşık 4 milyon araç olan araç emisyonlarının 2020'de 25 milyona yükseldiği anlamına geliyor. Otomobiller, kamyonlar ve otobüsler gibi bu araçların çoğu, emisyonlar söz konusu olduğunda uluslararası standartları karşılamıyor ve büyük miktarlarda dizel yakıt kullanılıyor.

Ankara sınırları içinde yaklaşık 4,5 milyon nüfusa sahip olması sebebi ile yüksek nüfuslu birçok şehirde ortaya çıkan kirlilik kaynaklarına maruz kalmaktadır.

# Veri

Ankara iline ait 2024 yılı boyunca ölçülen hava kalitesi verileri.

## Veri Kaynağı

<https://sim.csb.gov.tr/STN/STN_Report/StationDataDownloadNew>

## Veri Hakkında Genel Bilgiler

PM2.5, PM10 gibi partikül madde ölçümleri ile birlikte sıcaklık, nem gibi meteorolojik verileri de sağlamaktadır.

## Tercih Sebebi

Hepimizin yaşamakta olduğu ülkemizin başkenti Ankara'mızın havası hakkında farkındalık yaratmak ve elde edilen sonuçlara göre iyileştirmeler geliştirmek

## Ön İşleme

```{r}

install.packages("readxl")
library(readxl)

# Veri yükleme
veri <- read_excel("ankara_hava_kalitesi_2024")

# Sütun adları düzenleme
colnames(veri) <- c("Istasyon", "Tarih", "PM10", "PM2_5", "SO2", "NO2", "NOX", "NO", "Extra")
veri <- veri %>% select(-Extra)

# Ondalıkları düzeltme ve sayıya çevirme
veri <- veri %>% mutate(across(PM10:NO, ~as.numeric(gsub(",", ".", .))))

# Tarih dönüşümü
veri$Tarih <- ymd_hms(veri$Tarih)
```

# Analiz

```{r}
# Tarih ve saat sütunlarını birleştirerek datetime oluşturun
hava_verisi <- hava_verisi %>%
  mutate(datetime = as.POSIXct(paste(Tarih, Saat), format = "%Y-%m-%d %H:%M"))

# İlçe, gün, ay, mevsim bilgilerini ekleyin
hava_verisi <- hava_verisi %>%
  mutate(
    İlçe = as.factor(İlçe),
    Gün = day(datetime),
    Ay = month(datetime, label = TRUE),
    Mevsim = case_when(
      Ay %in% c("Dec", "Jan", "Feb") ~ "Kış",
      Ay %in% c("Mar", "Apr", "May") ~ "İlkbahar",
      Ay %in% c("Jun", "Jul", "Aug") ~ "Yaz",
      Ay %in% c("Sep", "Oct", "Nov") ~ "Sonbahar"
    )
  )

# İlçe bazında PM2.5 ve PM10 ortalamalarını hesaplayın
ilce_ortalamalari <- hava_verisi %>%
  group_by(İlçe) %>%
  summarise(
    PM2.5_Ortalama = mean(PM2.5, na.rm = TRUE),
    PM10_Ortalama = mean(PM10, na.rm = TRUE)
  )

# Mevsimsel analiz
mevsim_analizi <- hava_verisi %>%
  group_by(Mevsim, İlçe) %>%
  summarise(
    PM2.5_Ortalama = mean(PM2.5, na.rm = TRUE),
    PM10_Ortalama = mean(PM10, na.rm = TRUE)
  )

# Görselleştirme: İlçelere göre PM2.5 ortalamaları
ggplot(ilce_ortalamalari, aes(x = reorder(İlçe, -PM2.5_Ortalama), y = PM2.5_Ortalama)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  coord_flip() +
  labs(title = "İlçelere Göre PM2.5 Ortalamaları (2024)", x = "İlçe", y = "PM2.5 (µg/m³)")

```

## Keşifsel Veri Analizi

## 1.Zaman Serisi Analizi

```{r}
# Günlük ortalama
gunluk <- veri %>% mutate(Gun = as_date(Tarih)) %>% group_by(Gun) %>%
  summarise(across(PM10:NO, ~mean(., na.rm = TRUE)))

# Çizim
ggplot(gunluk, aes(x = Gun)) +
  geom_line(aes(y = PM10, color = "PM10")) +
  geom_line(aes(y = PM2_5, color = "PM2.5")) +
  labs(title = "Günlük PM10 ve PM2.5", x = "Tarih", y = "Konsantrasyon (ug/m3)") +
  theme_minimal() +
  scale_color_manual(values = c("PM10" = "orange", "PM2.5" = "blue"))
```

## 2. Isı Haritası Analizi

```{r}
isi <- veri %>% mutate(Ay = month(Tarih, label = TRUE), Saat = hour(Tarih)) %>%
  group_by(Ay, Saat) %>% summarise(PM2_5 = mean(PM2_5, na.rm = TRUE)) %>%
  pivot_wider(names_from = Saat, values_from = PM2_5)

heatmaply(as.matrix(isi[,-1]),
          xlab = "Saat", ylab = "Ay",
          row_side_colors = isi$Ay,
          main = "PM2.5 Isı Haritası")

```

## Trend Analizi

## 1. Korelasyon Analizi

```{r}
# Korelasyon matrisi oluştur
cor_data <- veri %>% select(PM10:NO)
cor_matrix <- cor(cor_data, use = "complete.obs")

# Görselleştir
corrplot(cor_matrix, method = "color", addCoef.col = "black")
```

## Model Uydurma

## 1. SInıflandırma Modeli

```{r}
# PM10'u sınıflara ayıralım (örnek: temiz - kirli)
veri_model <- veri %>% mutate(PM10_Sinif = case_when(
  PM10 < 50 ~ "Temiz",
  PM10 >= 50 ~ "Kirli",
  TRUE ~ NA_character_
)) %>% drop_na(PM10_Sinif)


# Eğitim-test bölmesi
set.seed(123)
trainIndex <- sample(1:nrow(veri_model), 0.7 * nrow(veri_model))
train <- veri_model[trainIndex, ]
test <- veri_model[-trainIndex, ]


# Model: Karar ağacı (rpart)
library(rpart)
model <- rpart(PM10_Sinif ~ SO2 + NO2 + NOX + NO + PM2_5, data = train, method = "class")
pred <- predict(model, test, type = "class")

# Doğruluk oranı
accuracy <- mean(pred == test$PM10_Sinif)
print(paste("Doğruluk:", round(accuracy * 100, 2), "%"))
```

## Görselleştirme

## 1. Etkileşimli Grafik: İstasyona göre PM2.5

```{r}
library(shiny)
library(ggplot2)

ui <- fluidPage(
  selectInput("istasyon", "İstasyon Seçin", choices = unique(veri$Istasyon)),
  plotOutput("grafik")
)

server <- function(input, output) {
  output$grafik <- renderPlot({
    df_filt <- veri %>% filter(Istasyon == input$istasyon) %>%
      group_by(Gun = as.Date(Tarih)) %>%
      summarise(PM2_5 = mean(PM2_5, na.rm = TRUE))

   ggplot(df_filt, aes(x = Gun, y = PM2_5)) +
      geom_line(color = "darkgreen") +
      labs(title = paste(input$istasyon, "PM2.5 Günlük Ortalama"), x = "Tarih", y = "PM2.5") +
      theme_minimal()
  })
}

shinyApp(ui, server)
```

## Sonuçlar

```{r}

```

# Sonuçlar ve Ana Çıkarımlar

```{r}

```

# Kaynaklar

[https://sim.csb.gov.tr](https://sim.csb.gov.tr/STN/STN_Report/StationDataDownloadNew)

<https://www.iqair.com/us/turkey/ankara/ankara>

<https://aqicn.org/city/turkey/ankara/ulus-trafik/>

<https://quarto.org/docs/interactive/widgets/jupyter.html>
